(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-version-addVersion-addVersion"],{"487a":function(t,e,n){"use strict";n.r(e);var a=n("bf71"),r=n("528d");for(var o in r)"default"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n("2877"),u=Object(i["a"])(r["default"],a["a"],a["b"],!1,null,"06e07ea6",null);e["default"]=u.exports},"528d":function(t,e,n){"use strict";n.r(e);var a=n("7913"),r=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=r.a},7913:function(t,e,n){"use strict";var a=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var r=a(n("3b8d")),o={mounted:function(){var t=this,e=document.createElement("input");e.type="file",e.onchange=function(e){console.log(e);var n=e.target.files[0];t.uploadPackage(n)},this.$refs.input.$el.appendChild(e)},data:function(){return{form:{platform:1,appVersion:"",realAppVersion:"",updateContent:"",allUpdate:1,downloadUrl:""}}},methods:{switch1Change:function(t){t.target.value?this.form.platform=1:this.form.platform=0},switch2Change:function(t){t.target.value?this.form.allUpdate=1:this.form.allUpdate=0},uploadPackage:function(t){var e=this,n=new FormData;n.append("file",t);var a=new XMLHttpRequest;a.open("POST","".concat(this.$util.url,"api/upload"),!0),a.onload=function(t){console.log(t),4===t.target.readyState&&200===t.target.status?(e.$util.toast("上传成功"),e.form.downloadUrl=JSON.parse(t.target.response).data.url):e.$util.toast("上传失败")},a.send(n)},confirm:function(){var t=(0,r.default)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(""!==this.form.realAppVersion){t.next=3;break}return this.$util.toast("请输入版本"),t.abrupt("return");case 3:if(""!==this.form.appVersion){t.next=6;break}return this.$util.toast("请输入版本值"),t.abrupt("return");case 6:if(""!==this.form.updateContent){t.next=9;break}return this.$util.toast("请输入更新内容"),t.abrupt("return");case 9:if(""!==this.form.downloadUrl){t.next=12;break}return this.$util.toast("请上传安装包"),t.abrupt("return");case 12:return t.next=14,this.$util.request({requestUrl:"api/version",method:"POST",data:this.form});case 14:e=t.sent,console.log("添加版本",e),e&&(this.$util.toast("添加成功"),setTimeout(function(){uni.navigateBack()},500));case 17:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}};e.default=o},bf71:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",[n("v-uni-view",[t._v("安卓")]),n("v-uni-switch",{attrs:{checked:1==t.form.platform},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.switch1Change.apply(void 0,arguments)}}})],1),n("v-uni-view",[n("v-uni-view",[t._v("整包")]),n("v-uni-switch",{attrs:{checked:1==t.form.allUpdate},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.switch2Change.apply(void 0,arguments)}}})],1),n("v-uni-input",{attrs:{type:"text",placeholder:"输入版本,如1.0.0"},model:{value:t.form.realAppVersion,callback:function(e){t.$set(t.form,"realAppVersion",e)},expression:"form.realAppVersion"}}),n("v-uni-input",{attrs:{type:"number",placeholder:"输入版本值,如100"},model:{value:t.form.appVersion,callback:function(e){t.$set(t.form,"appVersion",e)},expression:"form.appVersion"}}),n("v-uni-textarea",{attrs:{placeholder:"输入更新内容"},model:{value:t.form.updateContent,callback:function(e){t.$set(t.form,"updateContent",e)},expression:"form.updateContent"}}),n("v-uni-view",{ref:"input",staticClass:"input"}),n("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t._v("确定")])],1)},r=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r})}}]);